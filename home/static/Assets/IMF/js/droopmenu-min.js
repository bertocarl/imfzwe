!function ($) { "use strict"; $.fn.droopmenu = function (e) { var o = { dmArrow: !1, dmIndicator: !0, dmArrowDirection: "dmarrowup", dmHideClick: !0, dmClickIcon: !0, dmTabAccess: !0, dmAnimation: !0, dmFixed: !1, dmSticky: !1, dmStickyClass: "dmsticky", dmOffCanvas: !0, dmAnimationEffect: "dmfade", dmFixedClass: "dmfixed", dmOffCanvasPos: "dmoffright", dmPosition: "dmtop", dmOrientation: "dmhorizontal", dmCentered: !1, dmCenteredClass: "dmcentered", dmOpenClass: "dmopener", dmAnimDelay: 1200, dmShowDelay: 200, dmHideDelay: 200, dmToggleSpeed: 500, dmBreakpoint: 1165 }; e = $.extend(o, e); var d = $(this), a = $("body"), n = $(d), t = $(".droopmenu-nav"), s = $(".droopmenu-toggle"), i = $('<div class="dm-arrow"></div>'), r = $('<div class="droopmenu-overlay"></div>'), m = $('<div class="droopmenu-mclose"><span></span></div>'), l = $(".droopmenu-extra .droopmenu > li:has(> ul), .droopmenu-extra .droopmenu li .droopmenu-indicator"), u = n, p = r, c = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, f = function () { if ($(d).find(".droopmenu li a").each(function () { $(this).siblings("ul").length > 0 && ($(this).attr("aria-expanded", "false"), $(this).parent("li").addClass("droopmenu-parent").attr("aria-haspopup", "true"), 1 == o.dmIndicator && $(this).append("<span class='droopmenu-indicator'><em></em></span>")), $(this).siblings("ul").find(".droopmenu-grid").length > 0 && $(".droopmenu-grid").closest("ul").addClass("droopmenu") }), $(d).find("li:has(ul.droopmenu-megamenu)").addClass("droopmenu-mega"), $(d).find(".droopmenu > li > a").append("<em class='droopmenu-topanim'></em>"), $(d).find(".droopmenu-nav .droopmenu").wrapAll("<div class='droopmenu-nav-wrap'><div class='droopmenu-navi'></div></div>"), $(d).find(s).append("<i class='dm-burg'></i><i class='dm-burg'></i><i class='dm-burg'></i>"), 1 == o.dmFixed && $(d).addClass(o.dmFixedClass), 1 == o.dmSticky && $(d).addClass(o.dmStickyClass), 1 == o.dmArrow) switch ($(d).find(".droopmenu > li:has(ul) > a").after(i), o.dmArrowDirection) { case "dmarrowup": $(d).addClass("dmarrow-up"); break; case "dmarrowdown": $(d).addClass("dmarrow-down"); break } switch (o.dmOrientation) { case "dmvertical": $(d).addClass("droopmenu-vertical"); break; case "dmhorizontal": $(d).addClass("droopmenu-horizontal"); break } switch (o.dmPosition) { case "dmtop": $(d).addClass("dmpos-top"); break; case "dmbottom": $(d).addClass("dmpos-bottom"); break; case "dmleft": $(d).addClass("dmpos-left"); break; case "dmright": $(d).addClass("dmpos-right"); break } }, v = function () { 1 == o.dmOffCanvas ? (n.addClass("droopmenu-offcanvas-open"), a.addClass("droopmenu-dmopen"), m.addClass("dmo-active")) : (t.stop(!0, !0).slideDown(o.dmToggleSpeed), a.removeClass("droopmenu-dmopen"), m.remove()) }, C = function () { 1 == o.dmOffCanvas ? (n.removeClass("droopmenu-offcanvas-open"), m.removeClass("dmo-active"), setTimeout(function () { a.removeClass("droopmenu-dmopen") }, o.dmAnimDelay)) : (t.stop(!0, !0).slideUp(o.dmToggleSpeed), a.removeClass("droopmenu-dmopen"), m.remove()) }, h = function () { s.removeClass("dmt-active"), m.removeClass("dmo-active"), C() }, b = function (e) { e.preventDefault(); var d = $(this), a = d.closest("ul:not(.droopmenu-grid ul)"), n = a.find(".dmtoggle-open"), t = d.closest("li"), s = t.hasClass("dmtoggle-open"), i = 0; t.removeClass(o.dmOpenClass).children("ul").find("li").removeClass(o.dmOpenClass), a.find("ul:not(.droopmenu-grid ul)").stop(!0, !0).slideUp(o.dmToggleSpeed, function () { ++i == a.find("ul:not(.droopmenu-grid ul)").length && (n.removeClass("dmtoggle-open"), n.find("> a").attr("aria-expanded", "false"), n.find("ul").removeAttr("style")) }), s || (t.children("ul:not(.droopmenu-grid ul)").stop(!0, !0).slideDown(o.dmToggleSpeed), t.addClass("dmtoggle-open"), t.find("> a").attr("aria-expanded", "true")) }, g = function () { if (c >= o.dmBreakpoint) { $(document).off("click.droopMenu touchstart.droopMenu"), $(d).find(".droopmenu li a .droopmenu-indicator").off("click"), $(d).find(".droopmenu li a:not(.droopmenu-grid a)").off("click"), $(d).removeClass(o.dmOffCanvasPos), $(d).removeClass("droopmenu-offcanvas droopmenu-offcanvas-open"), $(d).closest(a).removeClass("droopmenu-dmopen"), $(d).find(r, m).remove(), 1 == o.dmAnimation && $(d).addClass(o.dmAnimationEffect), 1 == o.dmOffCanvas && $(d).find(s).removeClass("dmt-active"), 1 == o.dmTabAccess && $(d).find("a, object, :input, iframe, [tabindex]").focus(function () { $(this).parents('li:has("ul")').addClass(o.dmOpenClass).find("> a").attr("aria-expanded", "true") }).blur(function () { $(this).parents('li:has("ul")').removeClass(o.dmOpenClass).find("> a").attr("aria-expanded", "false") }), 1 == o.dmCentered && $(d).addClass(o.dmCenteredClass); var e, i = $(d).find(".droopmenu li:has(ul)"); i.removeClass(o.dmOpenClass), i.on({ mouseenter: function () { var d = $(this); clearTimeout(e), e = setTimeout(function () { d.stop(!0, !0).addClass(o.dmOpenClass), d.find("> a").attr("aria-expanded", "true") }, o.dmShowDelay) }, mouseleave: function () { var e = $(this); setTimeout(function () { e.stop(!0, !0).removeClass(o.dmOpenClass), e.find("> a").attr("aria-expanded", "false") }, o.dmHideDelay) } }) } else $(d).removeClass(o.dmAnimationEffect), $(d).removeClass(o.dmCenteredClass), $(d).find(".droopmenu li:has(ul)").off("mouseenter mouseleave"), 1 == o.dmClickIcon ? $(d).find(".droopmenu li a .droopmenu-indicator").off("click").on("click", b) : $(d).find(".droopmenu li:has(ul) > a").off("click").on("click", b), 1 == o.dmOffCanvas && (t.after(r), t.prepend(m), n.addClass("droopmenu-offcanvas"), n.addClass(o.dmOffCanvasPos), $(d).on("click", function (e) { var o = $(d).find(".droopmenu-mclose span"); $(e.target).is(o) && h() })), 1 == o.dmHideClick && $(document).on("click.droopMenu touchstart.droopMenu", function (e) { if (1 == o.dmOffCanvas ? $(e.target).is(p) && h() : d.is(e.target) || 0 !== d.has(e.target).length || t.slideUp(o.dmToggleSpeed, function () { s.removeClass("dmt-active") }), !l.is(e.target) && 0 === l.has(e.target).length) { var a = $(d).find(".droopmenu-extra .droopmenu li:has(ul)"); a.removeClass("dmtoggle-open").find("> a").attr("aria-expanded", "false"), a.find("> a").removeClass("dmparent-open").siblings("ul").slideUp(o.dmToggleSpeed, function () { }) } }) }, k = function () { $(d).find(".droopmenu-tabs").each(function (e) { var o = $(this); o.wrapInner('<div class="droopmenu-tabpanel droopmenutabcol"></div>'), o.prepend('<div class="droopmenu-tabnav droopmenutabcol"></div>'), o.find(".droopmenu-tabsection").each(function (d) { $(this).attr("id", "droopmenutab" + e + d), $(this).children(".droopmenu-tabheader").attr("href", "#droopmenutab" + e + d), o.children(".droopmenu-tabnav").append('<a href="#droopmenutab' + e + d + '">' + $(this).children(".droopmenu-tabheader").html() + "</a>") }), o.find(".droopmenu-tabsection:first").addClass("droopmenu-tab-active"), o.find(".droopmenu-tabnav a:first").addClass("droopmenu-tab-active"), o.find(".droopmenu-tabheader").each(function (e) { $(this).on("click", function (e) { e.preventDefault(), o.find(".droopmenu-tabsection").closest().removeClass("droopmenu-tab-active"); var d = $(this).parent().index(); $(this).hasClass("droopmenu-tab-active") ? o.find(".droopmenu-tabsection > .droopmenu-tab-active").removeClass("droopmenu-tab-active") : (o.find(".droopmenu-tabsection > .droopmenu-tab-active").removeClass("droopmenu-tab-active"), o.find(".droopmenu-tabsection:eq(" + d + ")").children().toggleClass("droopmenu-tab-active")) }) }), o.find(".droopmenu-tabnav a").each(function (e) { $(this).closest(o).hasClass("droopmenu-tab-hover") ? $(this).hover(function () { var e = $(this).index(); o.find(".droopmenu-tabsection, .droopmenu-tabnav a").removeClass("droopmenu-tab-active"), o.find(".droopmenu-tabsection:eq(" + e + "), .droopmenu-tabnav a:eq(" + e + ")").toggleClass("droopmenu-tab-active") }) : $(this).on("click", function (e) { e.preventDefault(); var d = $(this).index(); o.find(".droopmenu-tabsection, .droopmenu-tabnav a").removeClass("droopmenu-tab-active"), o.find(".droopmenu-tabsection:eq(" + d + "), .droopmenu-tabnav a:eq(" + d + ")").toggleClass("droopmenu-tab-active") }) }) }) }, w = function () { $(d).find(s).on("click", function (e) { e.preventDefault(), $(this).toggleClass("dmt-active"), $(this).hasClass("dmt-active") ? v() : C() }) }; return this.each(function () { k(), f(), g(), w(); var e; $(window).on("resize.droopMenu orientationchange.droopMenu", function () { clearTimeout(e), e = setTimeout(function () { c = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, g() }, 100) }) }) } }(jQuery);